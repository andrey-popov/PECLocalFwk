<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Mēnsūra: Service Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mēnsūra
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_service-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Service Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Abstract base class for services.  
 <a href="class_service.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_service_8hpp_source.html">Service.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Service:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_service.png" usemap="#Service_map" alt=""/>
  <map id="Service_map" name="Service_map">
<area href="class_b_tag_eff_service.html" title="Service to accesses b-tagging efficiencies stored in a ROOT file. " alt="BTagEffService" shape="rect" coords="0,56,128,80"/>
<area href="class_b_tag_s_f_service.html" title="Service to retrieve b-tagging scale factors. " alt="BTagSFService" shape="rect" coords="138,56,266,80"/>
<area href="class_b_tag_w_p_service.html" title="A class to perform b-tagging. " alt="BTagWPService" shape="rect" coords="276,56,404,80"/>
<area href="class_jet_corrector_service.html" title="A service that computes jet energy and resolution corrections. " alt="JetCorrectorService" shape="rect" coords="414,56,542,80"/>
<area href="class_syst_service.html" title="A service to report requested systematic variation to plugins. " alt="SystService" shape="rect" coords="552,56,680,80"/>
<area href="class_t_file_service.html" title="Creates ROOT files and allows writing output into them. " alt="TFileService" shape="rect" coords="690,56,818,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6d83647c9afecd5afce032ab833fa069"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_service.html#a6d83647c9afecd5afce032ab833fa069">Service</a> (std::string const &amp;name)</td></tr>
<tr class="memdesc:a6d83647c9afecd5afce032ab833fa069"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a6d83647c9afecd5afce032ab833fa069">More...</a><br /></td></tr>
<tr class="separator:a6d83647c9afecd5afce032ab833fa069"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63fe5c77d146248a11f76e51b1e66ec1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a63fe5c77d146248a11f76e51b1e66ec1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_service.html#a63fe5c77d146248a11f76e51b1e66ec1">Service</a> (<a class="el" href="class_service.html">Service</a> const &amp;)=default</td></tr>
<tr class="memdesc:a63fe5c77d146248a11f76e51b1e66ec1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default copy constructor. <br /></td></tr>
<tr class="separator:a63fe5c77d146248a11f76e51b1e66ec1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab30abe2e3bb812d005e6e89fb0c752a1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab30abe2e3bb812d005e6e89fb0c752a1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_service.html#ab30abe2e3bb812d005e6e89fb0c752a1">Service</a> (<a class="el" href="class_service.html">Service</a> &amp;&amp;)=default</td></tr>
<tr class="memdesc:ab30abe2e3bb812d005e6e89fb0c752a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default move constructor. <br /></td></tr>
<tr class="separator:ab30abe2e3bb812d005e6e89fb0c752a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18315706414f39d6f17b0b27f8e03a5e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a18315706414f39d6f17b0b27f8e03a5e"></a>
<a class="el" href="class_service.html">Service</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_service.html#a18315706414f39d6f17b0b27f8e03a5e">operator=</a> (<a class="el" href="class_service.html">Service</a> const &amp;)=default</td></tr>
<tr class="memdesc:a18315706414f39d6f17b0b27f8e03a5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default assignment operator. <br /></td></tr>
<tr class="separator:a18315706414f39d6f17b0b27f8e03a5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b798149b90cbdb1f1c66f740db5864b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9b798149b90cbdb1f1c66f740db5864b"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_service.html#a9b798149b90cbdb1f1c66f740db5864b">~Service</a> ()=default</td></tr>
<tr class="memdesc:a9b798149b90cbdb1f1c66f740db5864b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default destructor. <br /></td></tr>
<tr class="separator:a9b798149b90cbdb1f1c66f740db5864b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6a5bcdc70e1797c574bac4fce10c4cd"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_service.html#aa6a5bcdc70e1797c574bac4fce10c4cd">BeginRun</a> (<a class="el" href="class_dataset.html">Dataset</a> const &amp;dataset)</td></tr>
<tr class="memdesc:aa6a5bcdc70e1797c574bac4fce10c4cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs initialization needed when processing of a new dataset starts.  <a href="#aa6a5bcdc70e1797c574bac4fce10c4cd">More...</a><br /></td></tr>
<tr class="separator:aa6a5bcdc70e1797c574bac4fce10c4cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47f0669618b0f41f2c7b14ba46e54e5a"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_service.html">Service</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_service.html#a47f0669618b0f41f2c7b14ba46e54e5a">Clone</a> () const  =0</td></tr>
<tr class="memdesc:a47f0669618b0f41f2c7b14ba46e54e5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clones the object.  <a href="#a47f0669618b0f41f2c7b14ba46e54e5a">More...</a><br /></td></tr>
<tr class="separator:a47f0669618b0f41f2c7b14ba46e54e5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aefbc6a2dd4bc99ff75d05fa096d4e4"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_service.html#a8aefbc6a2dd4bc99ff75d05fa096d4e4">EndRun</a> ()</td></tr>
<tr class="memdesc:a8aefbc6a2dd4bc99ff75d05fa096d4e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs necessary actions needed after processing of a dataset is finished.  <a href="#a8aefbc6a2dd4bc99ff75d05fa096d4e4">More...</a><br /></td></tr>
<tr class="separator:a8aefbc6a2dd4bc99ff75d05fa096d4e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0810d8e394b468660e23dbe954bc7623"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_processor.html">Processor</a> const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_service.html#a0810d8e394b468660e23dbe954bc7623">GetMaster</a> () const </td></tr>
<tr class="memdesc:a0810d8e394b468660e23dbe954bc7623"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a reference to the master.  <a href="#a0810d8e394b468660e23dbe954bc7623">More...</a><br /></td></tr>
<tr class="separator:a0810d8e394b468660e23dbe954bc7623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a568a9277f6cdb2e7f661528b8aac398f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a568a9277f6cdb2e7f661528b8aac398f"></a>
std::string const &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_service.html#a568a9277f6cdb2e7f661528b8aac398f">GetName</a> () const </td></tr>
<tr class="memdesc:a568a9277f6cdb2e7f661528b8aac398f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns name of the plugin. <br /></td></tr>
<tr class="separator:a568a9277f6cdb2e7f661528b8aac398f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad67b1749444a012f16370449d3f752c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_service.html#ad67b1749444a012f16370449d3f752c8">SetMaster</a> (<a class="el" href="class_processor.html">Processor</a> const *processor)</td></tr>
<tr class="memdesc:ad67b1749444a012f16370449d3f752c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides a pointer to an instance of <a class="el" href="class_processor.html" title="Runs plugins in a single thread. ">Processor</a> class that owns the service.  <a href="#ad67b1749444a012f16370449d3f752c8">More...</a><br /></td></tr>
<tr class="separator:ad67b1749444a012f16370449d3f752c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Abstract base class for services. </p>
<p>This class provides an interface to access information that is only updated once per dataset or not updated at all (as opposed to plugins that are designed to operate on the per-event basis). It keeps the pointer to the <a class="el" href="class_processor.html" title="Runs plugins in a single thread. ">Processor</a> class that owns services, which allows to access other services if needed.</p>
<p>A service is notified when processing of a dataset starts or finishes with the help of the dedicated hooks. Depending on the logic, it might or might not take action in response to these events.</p>
<p>A service must implement method Clone that creates a newly initialized copy of it. The clonning is performed by the framework before the start of processing of the first dataset, and thus it must not address any internal state specific to a dataset. Often it might be advantageous to share resources between all clones of a service.</p>
<p>A service must be capable of working in a multi-thread environment. In particular, a special attention should be given to ROOT objects as ROOT is not thread-safe. Critical blocks must be guarded with the help of class <a class="el" href="class_r_o_o_t_lock.html" title="Provides a lock to protect ROOT routines that are not thread-safe. ">ROOTLock</a>.</p>
<p>A service must define a valid move constructor. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a6d83647c9afecd5afce032ab833fa069"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Service::Service </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<p>The argument is the unique name of the service. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa6a5bcdc70e1797c574bac4fce10c4cd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Service::BeginRun </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_dataset.html">Dataset</a> const &amp;&#160;</td>
          <td class="paramname"><em>dataset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs initialization needed when processing of a new dataset starts. </p>
<p>The method is trivial in the default implementation. </p>

<p>Reimplemented in <a class="el" href="class_b_tag_eff_service.html#a7fed9710363b1d05774844563bdcdc1c">BTagEffService</a>, and <a class="el" href="class_t_file_service.html#af3481194581c4e919c24b1444f7646fc">TFileService</a>.</p>

</div>
</div>
<a class="anchor" id="a47f0669618b0f41f2c7b14ba46e54e5a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="class_service.html">Service</a>* Service::Clone </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clones the object. </p>
<p>The method must create a new instance of the (derived) class with the same constructor parameters. The method must not address any parameters specific to a dataset. Technically it means the method must create a new instance of the class exactly in the same way this has been created and initialized.</p>
<p>In some cases, it might be advantageous to share resources between all clones, provided that precautions against race conditions are taken.</p>
<p>The method is used when unique copies of services are created for each instance of class <a class="el" href="class_processor.html" title="Runs plugins in a single thread. ">Processor</a>. Clonning is performed before call to SetMaster and before the first call to BeginRun. </p>

<p>Implemented in <a class="el" href="class_b_tag_s_f_service.html#ab772091577bf7d93c947857cee897389">BTagSFService</a>, <a class="el" href="class_b_tag_eff_service.html#a64639ba6fafdd2828b7156aa1cded7e0">BTagEffService</a>, <a class="el" href="class_t_file_service.html#a1e4d0cc216a39bcee4781566fea72c27">TFileService</a>, <a class="el" href="class_jet_corrector_service.html#ada0b8ed57b8eadeb06c7bde1efd3e840">JetCorrectorService</a>, <a class="el" href="class_b_tag_w_p_service.html#ac8cf219851c93674459704170525ce52">BTagWPService</a>, and <a class="el" href="class_syst_service.html#a77eba8cd0753c4a2a4daedaec8004f01">SystService</a>.</p>

</div>
</div>
<a class="anchor" id="a8aefbc6a2dd4bc99ff75d05fa096d4e4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Service::EndRun </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs necessary actions needed after processing of a dataset is finished. </p>
<p>The method is trivial in the default implementation. </p>

<p>Reimplemented in <a class="el" href="class_t_file_service.html#af89ddd49b0c4e9c97872db45572635bf">TFileService</a>.</p>

</div>
</div>
<a class="anchor" id="a0810d8e394b468660e23dbe954bc7623"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_processor.html">Processor</a> const &amp; Service::GetMaster </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a reference to the master. </p>
<p>Will throw an exception if the pointer to master is null. </p>

</div>
</div>
<a class="anchor" id="ad67b1749444a012f16370449d3f752c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Service::SetMaster </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_processor.html">Processor</a> const *&#160;</td>
          <td class="paramname"><em>processor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Provides a pointer to an instance of <a class="el" href="class_processor.html" title="Runs plugins in a single thread. ">Processor</a> class that owns the service. </p>
<p>The pointer is guaranteed to be initialized before the first call to BeginRun. It stays valid for the lifetime of the object. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/mensura/core/<a class="el" href="_service_8hpp_source.html">Service.hpp</a></li>
<li>modules/core/src/Service.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
